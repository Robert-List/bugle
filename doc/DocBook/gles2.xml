<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % myentities SYSTEM "bugle.ent" >
%myentities;
]>
<chapter id="gles2">
    <title>Using bugle with OpenGL ES 2</title>
    <sect1 id="gles2-introduction">
        <title>Introduction</title>
        <para>
            As of July 2008, &bugle; has partial support for OpenGL ES 2. It
            has been tested using the AMD OpenGL ES Emulator 1.3, and basic
            features work. These include tracing, and the debugger using
            breakpoints, examining state, and examining shaders. Texture and
            framebuffer viewing does not currently work (due to limitations of
            the query mechanisms in OpenGL ES 2. Many of the filtersets do not
            work, either because they intrinsicly depend on features excluded
            from OpenGL ES 2 (such as a modelview matrix or polygon mode), or
            because they have not yet been ported. The test suite is not
            supported.
        </para>
        <para>
            It should be noted that when using an emulator that works on top
            of OpenGL, an alternative approach to debugging is to use
            &bugle; as a regular (desktop) OpenGL debugger. This will reveal
            data such as textures and framebuffers. However, it cannot access
            the error checking that is done in the emulation layer. For
            example, an <symbol>INVALID_ENUM</symbol> error will not be caught
            by the debugger if it is generated entirely within the emulation
            layer.
        </para>
        <para>
            Support on top of X11 rather than Windows is theoretically present
            and compiles, but has not been tested. Feedback from anyone with a
            working OpenGL ES 2 implementation on an X11 system is welcomed.
        </para>
    </sect1>
    <sect1 id="gles2-config">
        <title>Configuration</title>
        <para>
            Configuration can be done largely as described in <xref
                linkend="install-configure"/>. To indicate that OpenGL ES 2 is
            desired, the extra parameter
            <parameter>--with-target=gles2-egl-win</parameter> must be passed to
            <command>configure</command>.
        </para>
        <note>
            <para>
                Desktop OpenGL header files and libraries are still required
                for the GUI debugger.
            </para>
        </note>
        <para>
            You also need to ensure that your various paths are set correctly.
            The headers, libraries and DLLs for the OpenGL ES 2 implementation
            need to be listed in <envar>CPATH</envar>,
            <envar>LIBRARY_PATH</envar> and <envar>PATH</envar> respectively,
            unless the compiler is already configured to find them.
        </para>
    </sect1>
    <sect1 id="gles2-install">
        <title>Installation</title>
        <para>
            Apart from the usual installation step, some extra setup is
            required on a Windows system, due to the limitations of the
            dynamic linker. Create copies of the system
            <filename>libEGL.dll</filename> and
            <filename>libGLESv2.dll</filename> called
            <filename>bglEGL.dll</filename> and
            <filename>bglGLESv2.dll</filename> respectively. Then modify each
            of these
            files so that links to the other use the replacement name. This
            can be done as follows, although you might find that the version
            of <command>sed</command> provided with MSYS is too old:
        </para>
<screen>
<prompt>$</prompt> <userinput>sed -b 's/libGLESv2/bglGLESv2/g' libEGL.dll &gt; bglEGL.dll</userinput>
<prompt>$</prompt> <userinput>sed -b 's/libEGL/bglEGL/g' libGLESv2.dll &gt; bglGLESv2.dll</userinput>
</screen>
        <para>
            You should check that the new files are exactly the same size as
            the originals. Next, make sure that the versions of
            <filename>libEGL.dll</filename> and
            <filename>libGLESv2.dll</filename> installed by &bugle; are the
            first on the path, and that the renamed libraries you generated
            are also on the path.
        </para>
    </sect1>
</chapter>
