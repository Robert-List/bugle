#!/usr/bin/env python
Import('env')

# TODO source scanner, make this a tool?
env.Command(
        'data/gl.tu',
        'data/gl.c',
        'CCACHE_DISABLE=1 $CC $_CPPINCFLAGS -fdump-translation-unit -c $SOURCE && ${srcdir.path}/mvtu.sh gl.c $TARGET')

env.SharedLibrary(
        'bugle',
        [
            env.CFile('confparse.y', YACCFLAGS = '-d'),
            'conflex.l',
            'interceptor.c',
            'dlopen.c',
            'filters.c',
            'stats.c',
            'statslex.l',
            env.CFile('statsparse.y', YACCFLAGS = '-d'),
            'log.c',
            'objects.c',
            'input.c',
            '../budgielib/addresses.c',
            'gl/glutils.c',
            'gl/glsl.c',
            'glwin/trackcontext.c',
            'gl/gldisplaylist.c',
            'gl/globjects.c',
            'gl/glextensions.c',
            'gl/glbeginend.c'
        ])

